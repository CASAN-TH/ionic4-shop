<ion-header>
  <ion-toolbar>
    <ion-title>cart</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row *ngIf="cartDataList.length < 1">
    <ion-col size="12">
      <ion-grid>
        <ion-row>
          <ion-col size="12" text-center>
            <img src="assets/images/logo.png">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <div text-center>
              ไม่มีสินค้าในรถเข็น
            </div>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <div text-center>
              <ion-button (click)="onShoppingClick()" color="warning">ไปช้อปปิ้ง</ion-button>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col size="12">
      <ion-grid *ngFor="let cate of cartDataList; let i = index;">
        <ion-row class="border">
          <ion-col size="8" class="ion-align-items-center">
            <ion-checkbox color="danger" mode="ios"></ion-checkbox>
            <span class="span-title ion-align-items-center" (click)="onSelectShop(i,cate.shop.shop_id)">
              <ion-icon name="md-appstore" class="icon"></ion-icon>
              <ion-label class="select">{{cate.shop.shop_name}}</ion-label>
            </span>
          </ion-col>
          <ion-col size="4" class="ion-align-items-center">
            <ion-label class="shopcupon" (click)="vouchersModal()">กดรับคูปอง</ion-label>
          </ion-col>
        </ion-row>

        <ion-item-sliding *ngFor="let cart of cate.items; let j = index;">
          <ion-item lines="none">
            <ion-label class="ion-no-margin">
              <ion-row>
                <ion-col size="1" class="ion-align-items-center">
                  <ion-thumbnail class="ion-align-items-center">
                    <ion-checkbox color="danger" mode="ios" (click)="onSelectProduct()"></ion-checkbox>
                  </ion-thumbnail>
                </ion-col>
                <ion-col size="3.5" class="ion-align-items-center">
                  <div class="ion-align-items-center" (click)="onOpenlistClick()">
                    <ion-chip class="ion-justify-content-center">
                      <ion-label class="discount">{{cart.sale_price_percentage}}%</ion-label>
                    </ion-chip>
                    <img [src]="cart.images">
                  </div>
                </ion-col>
                <ion-col size="7.5">
                  <ion-row>
                    <ion-col size="12">
                      <ion-text class="phonename">
                        {{cart.name}}
                      </ion-text>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <span class="quantity" (click)="specModal()">
                        {{cart.option1}}
                        <span *ngIf="cart.options2">,</span>
                        {{cart.option2}}
                        <ion-icon class="arrow-down" name="arrow-down" mode="ios"></ion-icon>
                      </span>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="4" class="ion-align-items-center">
                      <ion-text class="phoneprice">
                        {{cart.sale_price_text}}
                      </ion-text>
                    </ion-col>
                    <ion-col size="8">
                      <div class="btn-right-position">
                        <span>
                          <ion-button class="btn-size" fill="clear" (click)="onRemoveClick(i,j)"
                            [disabled]="cartDataList[i].items[j].amount_product === 1">
                            <ion-icon class="icon-size" name="remove"></ion-icon>
                          </ion-button>
                        </span>
                        <span class="num-size">
                          {{cart.amount_product}}
                        </span>
                        <span>
                          <ion-button class="btn-size" fill="clear" (click)="onAddClick(i,j)">
                            <ion-icon class="icon-size" name="add"></ion-icon>
                          </ion-button>
                        </span>
                      </div>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <ion-text class="disprice">
                        <del>{{cart.regular_price_text}}</del>
                      </ion-text>
                    </ion-col>
                  </ion-row>
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
          <ion-item-options>
            <ion-item-option color="primary">
              <ion-icon slot="start" name="trash"></ion-icon>
              Delete
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>

      </ion-grid>

      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ion-row>
              <ion-col size="8" class="getcupon">
                <ion-input type="text" placeholder="ใส่รหัสคูปอง" class="inputcupon"></ion-input>
              </ion-col>
              <ion-col size="4" class="buttonget">
                <ion-item color="danger" disabled (click)="onAcceptCodeClick()" class="buttonget2">
                  <ion-label text-center>
                    รับ
                  </ion-label>
                </ion-item>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
      </ion-grid>


    </ion-col>
  </ion-row>


  <ion-row class="reccomment">
    <ion-col size="12">
      <ion-row>
        <ion-col size="4" text-end>
          <img class="iconimg" src="https://image.flaticon.com/icons/png/512/2152/2152407.png">
        </ion-col>
        <ion-col size="4">
          <h1 class="producttext" text-center>แนะนำ</h1>
        </ion-col>
        <ion-col size="4" text-start>
          <img class="iconimg" src="https://image.flaticon.com/icons/png/512/2152/2152407.png">
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>

  <productlist [recivedata]="reccommentDataList"></productlist>
</ion-content>

<ion-footer *ngIf="cartDataList.length > 0">
  <ion-row *ngIf="TotalCartDataList">
    <ion-col size="9">
      <ion-row>
        <ion-col size="2">
          <span>
            <ion-checkbox class="icon-check" color="danger" mode="ios" (click)="onSelectAll()"></ion-checkbox>
          </span>
        </ion-col>
        <ion-col size="3" class="footer-pading">
          <ion-text>ทั้งหมด</ion-text>
        </ion-col>
        <ion-col size="7">
          <span>
            ยอดรวม:
          </span>
          <span class="spanprice">
            {{TotalCartDataList.currency}} {{TotalCartDataList.total_regularprice_text}}
          </span>
          <span class="installment">
            {{TotalCartDataList.currency}}{{TotalCartDataList.installment_price_text}}
            {{TotalCartDataList.installment_period}}
            <ion-icon class="icon-inner" mode="ios" name="arrow-forward" (click)="InstallmentModal()"></ion-icon>
          </span>
        </ion-col>
      </ion-row>
    </ion-col>
    <ion-col size="3">
      <ion-item lines="none" (click)="onPayClick()" class="footer-button" color="warning">
        <ion-label text-center>
          <span class="quantity">
            ชำระ({{TotalCartDataList.amount_product}})
          </span>
        </ion-label>
      </ion-item>
    </ion-col>
  </ion-row>
</ion-footer>